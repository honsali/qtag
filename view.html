<html>
<head>
    <title>Qtag 0.5</title>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, height=device-height, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.css" rel="stylesheet" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.css" rel="stylesheet" />
    <link href="https://fonts.googleapis.com/earlyaccess/notokufiarabic.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Amiri" rel="stylesheet">
    <link rel="stylesheet" href="style.css"/>

</head>
<body> 
	<div  id="results">
	</div>
	
<a href=”https://api.whatsapp.com/send?phone=&text=TEST” target="_blank">share whatsapp 1</a>
<a href=”https://wa.me/?text=I\\'m%20inquiring%20about%20the%20apartment%20listing” target="_blank">share whatsapp 2</a>
<a href="mailto:nowhere@mozilla.org?cc=name2@rapidtables.com&bcc=name3@rapidtables.com&subject=The%20subject%20of%20the%20email&body=The%20body%20of%20the%20email">email share</a>

<a href="#" id="share"> generic share </a>
<hr />
<div class="a2a_kit a2a_kit_size_32 a2a_floating_style a2a_default_style" style="bottom:0px; right:0px;">
    <a class="a2a_button_facebook"></a>
    <a class="a2a_button_twitter"></a>
    <a class="a2a_button_pinterest"></a>
    <a class="a2a_dd" href="https://www.addtoany.com/share"></a>
</div>

<script async src="https://static.addtoany.com/menu/page.js"></script>
<br/>
	
</body>
</html>

<script src="https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.3/underscore-min.js"></script>
<script src="data.js"   type="text/javascript"></script>  
<script src="utils.js"    	type="text/javascript"></script>


<script type="text/javascript">
//is Web Share API supported?
if ( navigator.share ) {

  // share button click handler
  document.getElementById('share').addEventListener('click', () => {

    // share page information
    navigator.share({
      url: 'https://example.com/',
      title: 'My example page',
      text: 'An example page implementing the Web Share API.'
    });

  });

}

	var c = _GET["c"]
	var v = _GET["v"];
	console.log(v);
	var vList = []; 
	console.log(_GET);
	if(c === undefined && v === undefined){
		console.log('nothing defined');
	}else if(v === undefined){				//case of no verse , only chapter
		console.log('v undefined'); 
	}else if(v.indexOf('-') > 0){				//case of sequence of verses
		var start = v.split('-')[0];
		var end = v.split('-')[1];
		for(var i=start; i <= end; i++){
			vList.push(i);
		}
	}else if(v.indexOf(',') > 0){				//case of enumeration of verses
		vList = v.split(',');
	}else if(c > 0 && c < 115 && v > 0){		//default case is one chapter and one verse specifically
		vList[0] = v;
	}else{
		vList[0] = v;
		console.log('unknown case');
		console.log(_GET);
	} 
 
	var result;
	for(var i=0; i < vList.length; i++){ 					//for each verse in the req, fetch it
		console.log(c);
		console.log(vList[i]);
		result = _.find(data, {sura: Number(c), aya: Number(vList[i])});
		console.log(result);
		if(result === undefined)
			console.log('no result found for ' + vList[i]);
		else{ 
			div_result = document.createElement("div");
			div_result.innerHTML = result.text;
			div_result.classList = "rtl";
			document.querySelector("body").append(div_result);
		}
	}
	
</script>